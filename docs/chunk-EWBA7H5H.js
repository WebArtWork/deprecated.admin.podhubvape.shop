import{D as x,E as c,H as b,J as w,Ka as V,Ma as E,Na as W,O as s,Oa as L,P as p,Pa as N,Q as v,T as y,U as k,V as P,ca as u,db as A,ea as O,fb as B,ga as F,ha as S,ia as T,kb as j,lb as g,m as h,o as C,p as M,pb as D,qb as U,rb as z,t as _,u as f,xa as I}from"./chunk-KNFC6JSA.js";function G(i,d){if(i&1&&u(0),i&2){let n=d.$implicit;O(" ",n.components==null?null:n.components.length," ")}}function H(i,d){if(i&1){let n=y();s(0,"label",3)(1,"input",4),k("ngModelChange",function(){let r=_(n).$implicit,e=P();return f(e.changeStatus(r))}),T("ngModelChange",function(r){let e=_(n).$implicit;return S(e.active,r)||(e.active=r),f(r)}),p(),v(2,"span",5),s(3,"span",6),u(4,"Active"),p()()}if(i&2){let n=d.$implicit;x(),F("ngModel",n.active)}}var K=(()=>{class i{get rows(){return this._form.customForms}constructor(n,o,r){this._translate=n,this._alert=o,this._form=r,this.columns=["title","components","formId","active"],this.form=this._form.getForm("form",{formId:"form",title:"Custom form",components:[{name:"Text",key:"title",focused:!0,fields:[{name:"Placeholder",value:"fill title"},{name:"Label",value:"Title"}]},{name:"Select",key:"formId",fields:[{name:"Placeholder",value:"Select form id"},{name:"Label",value:"Form ID"},{name:"Items",value:this._form.formIds}]}]}),this.components=[],this.formComponents=this._form.getForm("formComponents",{formId:"formComponents",title:"Custom components",components:[{components:this.components},{name:"Select",key:"addComponent",fields:[{name:"Placeholder",value:"Select form componnet"},{name:"Label",value:"Form Component"},{name:"Value",value:"name",skipTranslation:!0},{name:"Items",value:this._form.components}]}]}),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(e,a)=>{this._form.create(e,a.bind(this))}}).then(this._form.create.bind(this))},update:e=>{this._form.modal(this.form,{label:"Update",click:(a,m)=>{this._form.update(a,m.bind(this))}},e).then(this._form.update.bind(this))},delete:e=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this user?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._form.delete(e)}}]})},buttons:[{icon:"text_fields",click:e=>{this.components.splice(0,this.components.length);let a={addComponent:"Text"};for(let t=0;t<e.components.length;t++){a["key"+t]=e.components[t].key;for(let l of e.components[t].fields)a[l.name+t]=l.value}let m=t=>{this.components.splice(t,1),e.components.splice(t,1),this._form.save(e)};(e.components||[]).forEach((t,l)=>{this.components.push(this._addCustomComponent(t.name,t.fields?.map(R=>R.name),this.components.length,m))}),this._form.modal(this.formComponents,{label:"Add component",click:()=>{let t=this._form.components.find(l=>l.name===a.addComponent)?.fields;this.components.push(this._addCustomComponent(a.addComponent,t,this.components.length,m)),e.components.push({name:a.addComponent,fields:t.map(l=>({value:"",name:l}))})}},a,()=>{},{size:"big"}).then(()=>{for(let t=0;t<e.components.length;t++){e.components[t].key=a["key"+t];for(let l of e.components[t].fields)l.value=a[l.name+t]}this._form.save(e)})}}]}}_addCustomComponent(n,o,r,e){return{class:"d-f mt10",components:[{name:"Text",key:"key"+r,root:!0,fields:[{name:"Placeholder",value:"fill key"},{name:"Label",value:"Key"}]},...(o||[])?.map(m=>({name:this._form.customFieldComponent[n+m]||"Text",key:m+r,root:!0,fields:[{name:"Placeholder",value:"fill "+m},{name:"Label",value:m.charAt(0).toUpperCase()+m.slice(1,m.length)}]})),{name:"Button",fields:[{name:"Label",value:"Remove"},{name:"Click",value:()=>{e(r)}}]}]}}changeStatus(n){setTimeout(()=>{if(n.active)for(let o of this._form.customForms)o._id===n._id||o.formId!==n.formId||o.active&&(o.active=!1,this._form.save(o));this._form.save(n)})}static{this.\u0275fac=function(o){return new(o||i)(c(A),c(j),c(g))}}static{this.\u0275cmp=C({type:i,selectors:[["ng-component"]],decls:3,vars:3,consts:[["title","Forms",3,"columns","config","rows"],["cell","components"],["cell","active"],[1,"container-box"],["type","checkbox",1,"w-input__checkbox",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"checkmark-text"]],template:function(o,r){o&1&&(s(0,"wtable",0),b(1,G,1,1,"ng-template",1)(2,H,5,1,"ng-template",2),p()),o&2&&w("columns",r.columns)("config",r.config)("rows",r.rows)},dependencies:[E,W,L,U,D],styles:['.container-box[_ngcontent-%COMP%]{position:relative;display:flex}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;height:20px;width:20px;background-color:#0f353d0f;border-radius:50%;transition:all .3s}.container-box[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#0f353d60}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:var(--c-primary)}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkmark[_ngcontent-%COMP%]:before{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:before{display:block}.container-box[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:6px;top:46%;width:5px;height:10px;border:solid white;border-width:0 1.5px 1.5px 0;transform:rotate(45deg) translate(-50%,-50%)}.check[_ngcontent-%COMP%]{max-width:100px}.checkmark-text[_ngcontent-%COMP%]{margin-left:28px;display:block}']})}}return i})();var J=[{path:"",component:K}],_e=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=M({type:i})}static{this.\u0275inj=h({imports:[V.forChild(J),N,I,B,z]})}}return i})();export{_e as FormsModule};
